<% content_for :title, "Edit Scheduled Job - #{@project.name}" %>

<div class="min-h-screen flex flex-col">
  <header class="bg-gray-800 border-b border-gray-700 px-4 py-3 flex items-center gap-3">
    <%= link_to project_scheduled_jobs_path(@project), class: "text-gray-400 hover:text-gray-200" do %>
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    <% end %>
    <h1 class="text-xl font-bold text-gray-100">Edit Scheduled Job</h1>
  </header>

  <main class="flex-1 overflow-y-auto p-4">
    <div class="max-w-4xl mx-auto">
      <%= form_with model: [@project, @scheduled_job], class: "space-y-6" do |f| %>
        <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
          <!-- Name -->
          <div>
            <%= f.label :name, class: "block text-sm font-medium text-gray-300 mb-2" %>
            <%= f.text_field :name, placeholder: "Daily summary report", class: "w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500" %>
            <% if @scheduled_job.errors[:name].any? %>
              <p class="mt-1 text-sm text-red-400"><%= @scheduled_job.errors[:name].first %></p>
            <% end %>
          </div>

          <!-- Cron Expression -->
          <div>
            <%= f.label :cron_expression, "Schedule (Cron Expression)", class: "block text-sm font-medium text-gray-300 mb-2" %>
            <%= f.text_field :cron_expression, placeholder: "0 9 * * * (daily at 9am)", class: "w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono" %>
            <% if @scheduled_job.errors[:cron_expression].any? %>
              <p class="mt-1 text-sm text-red-400"><%= @scheduled_job.errors[:cron_expression].first %></p>
            <% end %>
            <div class="mt-2 text-xs text-gray-500">
              <p>Examples:</p>
              <ul class="list-disc list-inside space-y-1">
                <li><code>0 9 * * *</code> - Daily at 9:00 AM</li>
                <li><code>*/30 * * * *</code> - Every 30 minutes</li>
                <li><code>0 0 * * 1</code> - Every Monday at midnight</li>
              </ul>
            </div>
          </div>

          <!-- Active -->
          <div>
            <%= f.label :active, class: "flex items-center" do %>
              <%= f.check_box :active, class: "rounded border-gray-600 text-purple-600 focus:ring-purple-500" %>
              <span class="ml-2 text-sm text-gray-300">Enable this scheduled job</span>
            <% end %>
          </div>

          <!-- Prompt Template -->
          <div>
            <%= f.label :prompt_template, "Prompt Template", class: "block text-sm font-medium text-gray-300 mb-2" %>
            <%= f.text_area :prompt_template, rows: 8, placeholder: "Generate a daily summary of project progress and todos", class: "w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm resize-none" %>
            <% if @scheduled_job.errors[:prompt_template].any? %>
              <p class="mt-1 text-sm text-red-400"><%= @scheduled_job.errors[:prompt_template].first %></p>
            <% end %>
            <p class="mt-1 text-xs text-gray-500">This prompt will be sent to the AI when the job runs</p>
          </div>

          <!-- Actions -->
          <div class="flex gap-3 pt-4">
            <%= f.submit "Update Job", class: "bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium" %>
            <%= link_to "Cancel", [@project, @scheduled_job], class: "bg-gray-700 hover:bg-gray-600 text-gray-200 px-6 py-3 rounded-lg" %>
          </div>
        </div>
      <% end %>
    </div>
  </main>
</div>
