<%= turbo_frame_tag "scheduled_job_status" do %>
  <% if @scheduled_job.status.in?(["queued", "running"]) %>
    <div class="mb-2 flex items-center gap-2 text-xs text-gray-300">
      <div class="animate-spin rounded-full h-3 w-3 border-b-2 border-purple-500"></div>
      <div><%= @scheduled_job.status.titleize %>â€¦</div>
    </div>
  <% else %>
    <div data-poll-frame-done></div>
  <% end %>

  <div>
    <h3 class="text-sm font-medium text-gray-400 mb-1">Status</h3>
    <div class="flex items-center gap-2 flex-wrap">
      <span class="<%= @scheduled_job.active? ? 'bg-green-900 text-green-200' : 'bg-gray-900 text-gray-400' %> px-2 py-1 text-xs rounded-full">
        <%= @scheduled_job.active? ? 'Active' : 'Inactive' %>
      </span>
      <% if @scheduled_job.status.present? && @scheduled_job.status != 'pending' %>
        <span class="<%= status_badge_class(@scheduled_job.status) %> px-2 py-1 text-xs rounded-full">
          <%= @scheduled_job.status.titleize %>
        </span>
      <% end %>
    </div>
  </div>
<% end %>
