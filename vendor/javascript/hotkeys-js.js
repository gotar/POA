// hotkeys-js@4.0.0 downloaded from https://ga.jspm.io/npm:hotkeys-js@4.0.0/dist/hotkeys-js.js

/*!
 * hotkeys-js v4.0.0
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * @author kenny wong <wowohoo@qq.com>
 * @license MIT
 * @homepage https://jaywcjlove.github.io/hotkeys-js
 */
const e=typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function t(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent(`on${t}`,n)}function n(e,t,n,o){e&&(e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent(`on${t}`,n))}function o(e,t){const n=t.slice(0,t.length-1),o=[];for(let t=0;t<n.length;t++)o.push(e[n[t].toLowerCase()]);return o}function s(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function r(e,t){const n=e.length>=t.length?e:t,o=e.length>=t.length?t:e;let s=!0;for(let e=0;e<n.length;e++)o.indexOf(n[e])===-1&&(s=!1);return s}function c(e){let t=e.keyCode||e.which||e.charCode;return e.code&&/^Key[A-Z]$/.test(e.code)&&(t=e.code.charCodeAt(3)),t}const i={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},l={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91},a={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},f={16:!1,18:!1,17:!1,91:!1},p={};for(let e=1;e<20;e++)i[`f${e}`]=111+e;let y=[],d=null,u="all";const h=new Map,k=e=>i[e.toLowerCase()]||l[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),m=e=>Object.keys(i).find((t=>i[t]===e)),w=e=>Object.keys(l).find((t=>l[t]===e)),g=e=>{u=e||"all"},O=()=>u||"all",b=()=>y.slice(0),E=()=>y.map((e=>m(e)||w(e)||String.fromCharCode(e))),K=()=>{const e=[];return Object.keys(p).forEach((t=>{p[t].forEach((({key:t,scope:n,mods:o,shortcut:s})=>{e.push({scope:n,shortcut:s,mods:o,keys:t.split("+").map((e=>k(e)))})}))})),e},v=e=>{const t=e.target||e.srcElement,{tagName:n}=t;let o=!0;const s=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(s||n==="TEXTAREA"||n==="SELECT")&&!t.readOnly)&&(o=!1),o},C=e=>(typeof e=="string"&&(e=k(e)),y.indexOf(e)!==-1),j=(e,t)=>{let n,o;e||(e=O());for(const t in p)if(Object.prototype.hasOwnProperty.call(p,t))for(n=p[t],o=0;o<n.length;)n[o].scope===e?n.splice(o,1).forEach((({element:e})=>I(e))):o++;O()===e&&g(t||"all")};function x(e){let t=c(e);e.key&&e.key.toLowerCase()==="capslock"&&(t=k(e.key));const n=y.indexOf(t);if(n>=0&&y.splice(n,1),e.key&&e.key.toLowerCase()==="meta"&&y.splice(0,y.length),(t===93||t===224)&&(t=91),t in f){f[t]=!1;for(const e in l)l[e]===t&&(S[e]=!1)}}const L=(e,...t)=>{if(typeof e=="undefined")Object.keys(p).forEach((e=>{Array.isArray(p[e])&&p[e].forEach((e=>_(e))),delete p[e]})),I(null);else if(Array.isArray(e))e.forEach((e=>{e.key&&_(e)}));else if(typeof e=="object")e.key&&_(e);else if(typeof e=="string"){let[n,o]=t;typeof n=="function"&&(o=n,n=""),_({key:e,scope:n,method:o,splitKey:"+"})}},_=({key:e,scope:t,method:n,splitKey:c="+"})=>{s(e).forEach((e=>{const s=e.split(c),i=s.length,a=s[i-1],f=a==="*"?"*":k(a);if(!p[f])return;t||(t=O());const y=i>1?o(l,s):[],d=[];p[f]=p[f].filter((e=>{const o=(!n||e.method===n)&&e.scope===t&&r(e.mods,y);return o&&d.push(e.element),!o})),d.forEach((e=>I(e)))}))};function A(e,t,n,o){if(t.element!==o)return;let s;if(t.scope===n||t.scope==="all"){s=t.mods.length>0;for(const e in f)Object.prototype.hasOwnProperty.call(f,e)&&(!f[e]&&t.mods.indexOf(+e)>-1||f[e]&&t.mods.indexOf(+e)===-1)&&(s=!1);(t.mods.length===0&&!f[16]&&!f[18]&&!f[17]&&!f[91]||s||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(y),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function P(e,t){const n=p["*"];let o=c(e);if(e.key&&e.key.toLowerCase()==="capslock"||!(S.filter||v).call(this,e))return;if((o===93||o===224)&&(o=91),y.indexOf(o)===-1&&o!==229&&y.push(o),["metaKey","ctrlKey","altKey","shiftKey"].forEach((t=>{const n=a[t];e[t]&&y.indexOf(n)===-1?y.push(n):!e[t]&&y.indexOf(n)>-1?y.splice(y.indexOf(n),1):t==="metaKey"&&e[t]&&(y=y.filter((e=>e in a||e===o)))})),o in f){f[o]=!0;for(const t in l)if(Object.prototype.hasOwnProperty.call(l,t)){const n=a[l[t]];S[t]=e[n]}if(!n)return}for(const t in f)Object.prototype.hasOwnProperty.call(f,t)&&(f[t]=e[a[t]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(y.indexOf(17)===-1&&y.push(17),y.indexOf(18)===-1&&y.push(18),f[17]=!0,f[18]=!0);const s=O();if(n)for(let o=0;o<n.length;o++)n[o].scope===s&&(e.type==="keydown"&&n[o].keydown||e.type==="keyup"&&n[o].keyup)&&A(e,n[o],s,t);if(!(o in p))return;const r=p[o],i=r.length;for(let n=0;n<i;n++)if((e.type==="keydown"&&r[n].keydown||e.type==="keyup"&&r[n].keyup)&&r[n].key){const o=r[n],{splitKey:c}=o,i=o.key.split(c),l=[];for(let e=0;e<i.length;e++)l.push(k(i[e]));l.sort().join("")===y.sort().join("")&&A(e,o,s,t)}}const S=function(e,n,r){y=[];const c=s(e);let i=[],a="all",f=document,u=0,m=!1,w=!0,g="+",O=!1,b=!1;if(r===void 0&&typeof n=="function"&&(r=n),Object.prototype.toString.call(n)==="[object Object]"){const e=n;e.scope&&(a=e.scope),e.element&&(f=e.element),e.keyup&&(m=e.keyup),e.keydown!==void 0&&(w=e.keydown),e.capture!==void 0&&(O=e.capture),typeof e.splitKey=="string"&&(g=e.splitKey),e.single===!0&&(b=!0)}for(typeof n=="string"&&(a=n),b&&L(e,a);u<c.length;u++){const e=c[u].split(g);i=[],e.length>1&&(i=o(l,e));let t=e[e.length-1];t=t==="*"?"*":k(t),t in p||(p[t]=[]),p[t].push({keyup:m,keydown:w,scope:a,mods:i,shortcut:c[u],method:r,key:c[u],splitKey:g,element:f})}if(typeof f!="undefined"&&typeof window!="undefined"){if(!h.has(f)){const e=(e=window.event)=>P(e,f),n=(e=window.event)=>{P(e,f),x(e)};h.set(f,{keydownListener:e,keyupListenr:n,capture:O}),t(f,"keydown",e,O),t(f,"keyup",n,O)}if(!d){const e=()=>{y=[]};d={listener:e,capture:O},t(window,"focus",e,O)}}};function M(e,t="all"){Object.keys(p).forEach((n=>{p[n].filter((n=>n.scope===t&&n.shortcut===e)).forEach((e=>{e&&e.method&&e.method({},e)}))}))}function I(e){const t=Object.values(p).flat();if(t.findIndex((({element:t})=>t===e))<0&&e){const{keydownListener:t,keyupListenr:o,capture:s}=h.get(e)||{};t&&o&&(n(e,"keyup",o,s),n(e,"keydown",t,s),h.delete(e))}if((t.length<=0||h.size<=0)&&(Array.from(h.keys()).forEach((e=>{const{keydownListener:t,keyupListenr:o,capture:s}=h.get(e)||{};t&&o&&(n(e,"keyup",o,s),n(e,"keydown",t,s),h.delete(e))})),h.clear(),Object.keys(p).forEach((e=>delete p[e])),d)){const{listener:e,capture:t}=d;n(window,"focus",e,t),d=null}}const T={getPressedKeyString:E,setScope:g,getScope:O,deleteScope:j,getPressedKeyCodes:b,getAllKeyCodes:K,isPressed:C,filter:v,trigger:M,unbind:L,keyMap:i,modifier:l,modifierMap:a};for(const e in T){const t=e;Object.prototype.hasOwnProperty.call(T,t)&&(S[t]=T[t])}if(typeof window!="undefined"){const e=window.hotkeys;S.noConflict=t=>(t&&window.hotkeys===S&&(window.hotkeys=e),S),window.hotkeys=S}export{S as default};

